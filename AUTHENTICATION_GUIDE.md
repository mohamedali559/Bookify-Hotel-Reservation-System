# ???? Authentication & Authorization - Bookify Hotel System

## ?? ???? ???????

?? ????? ???? ???? ??? Authentication ? Authorization ?? ??? ??????? (User ? Admin).

---

## ?? ??????? ????????

### 1. ViewModels
- **LoginViewModel.cs** - ????? ????? ??????
- **RegisterViewModel.cs** - ????? ???????

### 2. Controller
- **AccountController.cs** - ????? ???:
  - Login (GET/POST)
  - Register (GET/POST)
  - Logout (POST)
  - AccessDenied (GET)

### 3. Views
- **Views/Account/Login.cshtml** - ???? ????? ?????? ?????? ???? (???? navbar)
- **Views/Account/Register.cshtml** - ???? ??????? ?????? ???? (???? navbar)
- **Views/Account/AccessDenied.cshtml** - ???? ??? ?????? (???? navbar)
- **Views/Shared/_AuthLayout.cshtml** - Layout ??? ?????? Authentication ???? navbar

### 4. ??????? ??? ??????? ????????
- **Program.cs** - ?????:
  - Cookie configuration
  - Role seeding (User, Admin)
  - Default Admin user creation
- **_Layout.cshtml** - ????? ????? ???????? ?? ?????? Login/Logout
- **_HotelLayout.cshtml** - ????? ????? ???????? ?? dropdown menu (????? ?? `/Account/Login`)
- **AdminController.cs** - ????? `[Authorize(Roles = "Admin")]`
- **BookingController.cs** - ????? `[Authorize]`
- **ReservationController.cs** - ????? `[Authorize]`
- **PaymentController.cs** - ????? `[Authorize]`

### 5. ??????? ????????
- **LoginController.cs** - ?? ???? (??????? AccountController ????? ???)
- **Views/Login/Index.cshtml** - ?? ???? (??????? Views/Account/Login.cshtml ????? ???)

---

## ?? ?????? ?????? ??????????

### Admin Account (????? ????????)
- **Email:** admin@bookify.com
- **Password:** Admin@123
- **Role:** Admin

### User Account
????? ????? ???? ?????? ???? ?? ???? ???? Register

---

## ??? ??????? ??????????

### User Role
- ????? ??? ?????
- ????? ????? ??????
- ????? ??? ???????
- ????? ?????

### Admin Role
- ???? ???? ??????? User
- ????? ?????? ??? Admin Panel
- ????? ????? ??????

---

## ?? ??????? ????????

? ???? ????? ?????? ????
? ???? ??????? ?? validation
? ????? ????? ??????
? Cookie-based authentication
? Role-based authorization
? ???? Access Denied
? Logout functionality
? Remember Me feature
? User dropdown menu ?? ??? navbar
? ????? Admin ??????? ??? ??? ???????
? ????? ??????? ??????? (Booking, Payment, Admin)
? ????? Login/Register ???? navbar
? ????? ???? ?? ??????? ??????
? ??? ????? Login/Register ?? ??? navbar ?? ?????? ??????

---

## ?? ????? ?????????

### 1. ????? ???????
```bash
dotnet run
```

### 2. ????? ?????? ?? Admin
- ???? ??? ?? "Log In" ?? ??? navbar
- ?? ???? ?????? ???: `/Account/Login`
- ????: admin@bookify.com / Admin@123

### 3. ????? ???? ??????
- ???? ??? ?? "Register" ?? ??? navbar
- ?? ???? ?????? ???: `/Account/Register`
- ???? ???????? ????????

### 4. ????? ??????
- ???? ??? ??? ???????? ?? ??? navbar
- ???? "Logout"

---

## ?? ???????

### ????? Authentication (Login, Register, AccessDenied)
- **???? navbar** - ????? ???? ??????
- ?????? `_AuthLayout.cshtml` ????? ?? ??? Layouts ????????
- ????? ?????? ?? ?????? ??????? ???????
- ?????: ???? ???? (#25408f) ?? ????? ????? (#e6f0fa)
- Logo "GH - Golden Horizon" ?? ???? ??????

### ???? ???????
- ?????? `_Layout.cshtml` ?? `_HotelLayout.cshtml`
- ????? ??? navbar ???? ?? ?????? User
- Responsive design
- Font Awesome icons
- Bootstrap 5

---

## ?? ??????? ??????

### Password Requirements
- ????? ??????: 6 ????
- ??? ?? ????? ???: ??? ????? ??? ????? ???
- ?? ????? ???? ????

### Cookie Settings
- Expires: 7 ????
- Sliding Expiration: ?????
- HttpOnly: ?????
- Secure: Always
- SameSite: Strict

### Account Lockout
- Max Failed Attempts: 5
- Lockout Duration: 5 ?????

---

## ?? ??? Routes

```
GET  /Account/Login         - ???? ????? ?????? (???? navbar)
POST /Account/Login         - ?????? ????? ??????
GET  /Account/Register      - ???? ??????? (???? navbar)
POST /Account/Register      - ?????? ???????
POST /Account/Logout        - ????? ??????
GET  /Account/AccessDenied  - ???? ??? ?????? (???? navbar)
```

---

## ?? ??? ??? Navbar

### ?? _HotelLayout.cshtml
```razor
@if (User.Identity?.IsAuthenticated == true)
{
    <!-- User dropdown menu -->
    <div class="user-dropdown">
        <button>@User.Identity.Name</button>
        <!-- Dropdown menu with Logout -->
    </div>
}
else
{
    <a asp-controller="Account" asp-action="Login">Log In</a>
    <a asp-controller="Account" asp-action="Register">Register</a>
}
```

### ?? _Layout.cshtml
- ??? ????? ?? Bootstrap styling
- User dropdown ?? Profile ? My Bookings ? Logout

---

## ?? ??????? ????

1. **Database Migration**: ???? ?? ????? migrations ??? ?? ??? ????? ????? Identity:
   ```bash
   dotnet ef migrations add AddIdentityTables
   dotnet ef database update
   ```

2. **Admin User**: ??? ????? Admin ???????? ??? ??? ????? ???????

3. **Protected Routes**: ??????? ??????? ?????:
   - `/Admin/*` - Admin only
   - `/Booking/*` - Authenticated users
   - `/Reservation/*` - Authenticated users
   - `/Payment/*` - Authenticated users

4. **Validation**: ???? ??? Forms ????? ??? client-side ? server-side validation

5. **Layout Management**:
   - ????? Authentication ?????? `_AuthLayout` (???? navbar)
   - ???? ??????? ?????? `_Layout` ?? `_HotelLayout` (?? navbar)

6. **?? ??? ??????? ???????**:
   - `LoginController.cs` - ?? ????????? ???
   - `Views/Login/Index.cshtml` - ?? ????????? ???

---

## ?? ??????? ???????

### ??? ?? ???? ??? Login:
1. ???? ?? ?? Database ?????
2. ???? ?? ?? User ????? ?? Database
3. ???? ?? Logs ???????

### ??? ?? ???? Admin Panel:
1. ???? ?? ????? ?????? ????? Admin
2. ???? ?? Roles ?? Database

### ??? ??? ??? navbar ?? ????? Login/Register:
1. ???? ?? ?? ?????? ?????? `Layout = "_AuthLayout"`
2. ???? ?? ???? ??? `_AuthLayout.cshtml` ?? ???? `Views/Shared`

---

## ? ????? ?????? ???? ??????? ??????

- [ ] Email Confirmation
- [ ] Password Reset
- [ ] Two-Factor Authentication
- [ ] User Profile Page
- [ ] Change Password
- [ ] Social Login (Google, Facebook)
- [ ] Activity Logging
- [ ] Session Management

---

## ?? ?????

???????? ?? ???????????? ???? ??????? ?? ???? ???????.

**?? ??????? ?????! ?**
