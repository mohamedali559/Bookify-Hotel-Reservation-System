@{
    ViewData["Title"] = "Bookify Hotel Admin Dashboard";
}
@{
    Layout = null;
}

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<!-- DataTables CSS -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.5/css/jquery.dataTables.min.css">

<!-- Toastr CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Custom CSS -->
<link rel="stylesheet" href="~/css/AdminPanel.css" asp-append-version="true" />

<div class="container py-5">

    <h1 class="text-center mb-4">Bookify Hotel Admin Dashboard</h1>

    <!-- Section Navigation -->
    <div class="section-nav">
        <a href="#rooms-section">Rooms</a>
        <a href="#roomtypes-section">Room Types</a>
        <a href="#bookings-section">Bookings</a>
        <a href="#charts-section">Analytics</a>
    </div>

    <!-- Stats Section -->
    <div class="stats-container">
        <div class="stat-card">
            <h3>Total Rooms</h3>
            <p id="totalRooms">120</p>
        </div>
        <div class="stat-card">
            <h3>Total Bookings</h3>
            <p id="totalBookings">248</p>
        </div>
        <div class="stat-card">
            <h3>Total Sales</h3>
            <p id="totalSales">$47.6K</p>
        </div>
        <div class="stat-card">
            <h3>Visitors</h3>
            <p id="totalVisitors">189K</p>
        </div>
    </div>

    <!-- Rooms Section -->
    <div id="rooms-section" class="card">
        <h2 class="section-title">Rooms</h2>
        <button class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#addRoomModal">Add New Room</button>
        <table id="roomsTable" class="display" style="width:100%">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Room Number</th>
                    <th>Type</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>101</td>
                    <td>Single</td>
                    <td>Available</td>
                    <td>
                        <button class="btn btn-secondary btn-sm edit-room">Edit</button>
                        <button class="btn btn-secondary btn-sm delete-room">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Room Types Section -->
    <div id="roomtypes-section" class="card">
        <h2 class="section-title">Room Types</h2>
        <button class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#addRoomTypeModal">Add New Room Type</button>
        <table id="roomTypesTable" class="display" style="width:100%">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Capacity</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>Single</td>
                    <td>$50</td>
                    <td>1</td>
                    <td>
                        <button class="btn btn-secondary btn-sm edit-roomtype">Edit</button>
                        <button class="btn btn-secondary btn-sm delete-roomtype">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Bookings Section -->
    <div id="bookings-section" class="card">
        <h2 class="section-title">Bookings</h2>
        <table id="bookingsTable" class="display" style="width:100%">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Guest Name</th>
                    <th>Room</th>
                    <th>Check-in</th>
                    <th>Check-out</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>John Doe</td>
                    <td>101</td>
                    <td>2025-11-20</td>
                    <td>2025-11-25</td>
                    <td>Confirmed</td>
                    <td>
                        <button class="btn btn-secondary btn-sm cancel-booking">Cancel</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Analytics Section -->
    <div id="charts-section" class="card">
        <h2 class="section-title">Analytics</h2>
        <canvas id="salesChart" height="120"></canvas>
        <canvas id="bookingsChart" height="120" class="mt-4"></canvas>
    </div>
</div>

<!-- Back to Home -->
<div class="text-end mb-4">
    <a asp-controller="Home" asp-action="Index" class="btn btn-primary">
        <i class="bi bi-house-door-fill"></i> Back to Home
    </a>
</div>

<!-- Modals -->
<!-- Add Room Modal -->
<div class="modal fade" id="addRoomModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content bg-dark text-light">
            <div class="modal-header">
                <h5 class="modal-title">Add New Room</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form id="addRoomForm">
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="roomNumber" class="form-label">Room Number</label>
                        <input type="text" class="form-control" id="roomNumber" required>
                    </div>
                    <div class="mb-3">
                        <label for="roomType" class="form-label">Type</label>
                        <input type="text" class="form-control" id="roomType" required>
                    </div>
                    <div class="mb-3">
                        <label for="roomStatus" class="form-label">Status</label>
                        <select class="form-select" id="roomStatus" required>
                            <option value="Available">Available</option>
                            <option value="Occupied">Occupied</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Add Room</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Edit Room Modal -->
<div class="modal fade" id="editRoomModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content bg-dark text-light">
            <div class="modal-header">
                <h5 class="modal-title">Edit Room</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form id="editRoomForm">
                <div class="modal-body">
                    <input type="hidden" id="editRoomId">
                    <div class="mb-3">
                        <label for="editRoomNumber" class="form-label">Room Number</label>
                        <input type="text" class="form-control" id="editRoomNumber" required>
                    </div>
                    <div class="mb-3">
                        <label for="editRoomType" class="form-label">Type</label>
                        <input type="text" class="form-control" id="editRoomType" required>
                    </div>
                    <div class="mb-3">
                        <label for="editRoomStatus" class="form-label">Status</label>
                        <select class="form-select" id="editRoomStatus" required>
                            <option value="Available">Available</option>
                            <option value="Occupied">Occupied</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Update Room</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Add Room Type Modal -->
<div class="modal fade" id="addRoomTypeModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content bg-dark text-light">
            <div class="modal-header">
                <h5 class="modal-title">Add Room Type</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form id="addRoomTypeForm">
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="roomTypeName" class="form-label">Name</label>
                        <input type="text" class="form-control" id="roomTypeName" required>
                    </div>
                    <div class="mb-3">
                        <label for="roomTypePrice" class="form-label">Price</label>
                        <input type="text" class="form-control" id="roomTypePrice" required>
                    </div>
                    <div class="mb-3">
                        <label for="roomTypeCapacity" class="form-label">Capacity</label>
                        <input type="text" class="form-control" id="roomTypeCapacity" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Add Room Type</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Edit Room Type Modal -->
<div class="modal fade" id="editRoomTypeModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content bg-dark text-light">
            <div class="modal-header">
                <h5 class="modal-title">Edit Room Type</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form id="editRoomTypeForm">
                <div class="modal-body">
                    <input type="hidden" id="editRoomTypeId">
                    <div class="mb-3">
                        <label for="editRoomTypeName" class="form-label">Name</label>
                        <input type="text" class="form-control" id="editRoomTypeName" required>
                    </div>
                    <div class="mb-3">
                        <label for="editRoomTypePrice" class="form-label">Price</label>
                        <input type="text" class="form-control" id="editRoomTypePrice" required>
                    </div>
                    <div class="mb-3">
                        <label for="editRoomTypeCapacity" class="form-label">Capacity</label>
                        <input type="text" class="form-control" id="editRoomTypeCapacity" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Update Room Type</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- JS Libraries -->
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

<!-- Custom JS -->
<script src="~/js/AdminPanel.js" asp-append-version="true"></script>
