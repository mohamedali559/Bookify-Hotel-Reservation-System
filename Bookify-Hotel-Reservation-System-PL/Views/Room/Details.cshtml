@model RoomDetailsViewModel

@{
    ViewData["Title"] = Model.RoomTypeName;
}

@* Include external CSS stylesheets for room details page *@
@section Styles {
    <link rel="stylesheet" href="~/css/RoomsStyle.css" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
}

@* ===========================
   CART & TOAST UI COMPONENTS
   =========================== *@

@* Shopping cart icon with item count badge *@
<div class="cart" id="main-cart">
    <i class="fas fa-shopping-cart"></i> <span id="cart-count">0</span>
</div>

@* Cart popup showing selected rooms *@
<div id="cart-popup">
    <h3>Your Selected Rooms</h3>
    <div id="cart-items"></div>
    <button id="go-reservation" class="cart-button">Go to Reservation</button>
</div>

@* Toast notification element for user feedback *@
<div id="toast"></div>

@* ===========================
   MAIN ROOM DETAILS CONTAINER
   =========================== *@
<div class="room-details-container">
    
    @* Page header with room type name and decorative divider *@
    <div class="room-details-header">
        <h1>@Model.RoomTypeName</h1>
        <div class="divider"></div>
        <p>Experience luxury and comfort in our premium accommodations</p>
    </div>

    @* Two-column layout: Image on left, Room info on right *@
    <div class="room-details-content">
        
        @* Left column: Room image *@
        <div class="room-image-section">
            <img src="@Model.ImageUrl" alt="@Model.RoomTypeName" class="room-image">
        </div>

        @* Right column: Room information and specifications *@
        <div class="room-info-section">
            <h2>Room Features</h2>
            <p>@Model.RoomDescription</p>

            @* Grid displaying room specifications (guests, area, floor, room number) *@
            <div class="room-specs">
                <div class="spec-item">
                    <i class="fas fa-user-friends"></i>
                    <span>@Model.Guests Guests</span>
                </div>
                <div class="spec-item">
                    <i class="fas fa-vector-square"></i>
                    <span>@Model.Area m²</span>
                </div>
                <div class="spec-item">
                    <i class="fas fa-layer-group"></i>
                    <span>Floor @Model.Floor</span>
                </div>
                <div class="spec-item">
                    <i class="fas fa-building"></i>
                    <span>Room #@Model.RoomId</span>
                </div>
            </div>

            @* Price display with gradient background *@
            <div class="price-section">
                <div class="price-label">Starting from</div>
                <div class="price-value">$@Model.BasePrice</div>
                <div class="price-label">per night</div>
            </div>

            @* Booking information panel with hotel policies *@
            <div class="booking-info-panel">
                <h4><i class="fas fa-info-circle"></i> Booking Information</h4>
                <p><i class="fas fa-check-circle"></i> Free cancellation within 24 hours</p>
                <p><i class="fas fa-coffee"></i> Complimentary breakfast included</p>
                <p><i class="fas fa-wifi"></i> Free high-speed Wi-Fi</p>
                <p><i class="fas fa-clock"></i> Check-in: 2 PM | Check-out: 11 AM</p>
            </div>
        </div>
    </div>

    @* ===========================
       AMENITIES SECTION
       Display all amenities if available
       =========================== *@
    @if (Model.Amenities != null && Model.Amenities.Any())
    {
        <div class="amenities-section">
            <h3><i class="fas fa-star"></i> Room Amenities</h3>
            <div class="amenities-grid">
                @* Loop through each amenity and display as a card *@
                @foreach (var amenity in Model.Amenities)
                {
                    <div class="amenity-item">
                        <i class="fas fa-check-circle"></i>
                        <div>
                            <div class="amenity-name">@amenity.Name</div>
                            @* Show description only if it exists *@
                            @if (!string.IsNullOrWhiteSpace(amenity.Description))
                            {
                                <div class="amenity-desc">@amenity.Description</div>
                            }
                        </div>
                    </div>
                }
            </div>
        </div>
    }

    @* ===========================
       ACTION BUTTONS
       Add to cart and back to rooms list
       =========================== *@
    <div class="action-buttons">
        @* Primary action: Add room to cart *@
        <button class="btn-primary" onclick="addToCart()">
            <i class="fas fa-shopping-cart"></i> Add to Cart
        </button>
        @* Secondary action: Navigate back to rooms listing *@
        <a href="/Room/Index" class="btn-secondary">
            <i class="fas fa-arrow-left"></i> Back to Rooms
        </a>
    </div>
</div>

@* ===========================
   JAVASCRIPT SECTION
   Pass room data to external JS file
   =========================== *@
@section Scripts {
    <script>
        // Create global room data object for use in external JavaScript file
        // This bridges Razor model data to client-side JavaScript
        window.currentRoomData = {
            roomId: @Model.RoomId,
            roomTypeName: '@Html.Raw(Model.RoomTypeName.Replace("'", "\\'"))', // Escape single quotes
            roomDescription: '@Html.Raw(Model.RoomDescription.Replace("'", "\\'"))', // Escape single quotes
            imageUrl: '@Model.ImageUrl',
            basePrice: @Model.BasePrice,
            guests: @Model.Guests,
            area: @Model.Area,
            floor: @Model.Floor
        };
    </script>
    @* Load external JavaScript file for cart and toast functionality *@
    <script src="~/js/room-details.js"></script>
}
